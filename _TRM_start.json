{
  "meta": {
    "mimetype": "application/x-daoplayer-composition",
    "version": 1,
    "title": "_TRM_start",
    "description" : "start file for The Rough Mile - with Route Checking"
  },
  "defaultScene": "getGPS",
  "scenes": [
    {
      "name": "getGPS",
      "waypoints":{},
      "routes":{},
      "partial": false,
      "onload": "window.lastGpsWarning=totalTime; daoplayer.speak('Waiting for G P S.',true);",
      "onupdate": "if (activity=='NOGPS') { window.startNoGpsTime=totalTime; } if (totalTime>window.startNoGpsTime+20 && routes['0m'].near) { daoplayer.setScene('Scene_0'); }",
      "updatePeriod":1.0,
      "description": "wait for gps",
      "tracks": [
        {
          "name": "R14a",
          "volume": "sceneTime<4 ? [sceneTime,trackVolume,4,0.8] : 0.8",
          "pos": 0
        },
        {
          "name": "broadStreet",
          "volume": "sceneTime<4 ? [sceneTime,trackVolume,4,0.5] : 0.5",
          "pos": 0
        }
      ]
    },
    {
      "name": "Start/any",
      "partial": false,
      "waypoints":{},
      "routes": {"0m":"0m", "1n":"1n", "2m":"2m", "3n":"3n", "4m":"4m", "5n":"5n", "6nm":"6nm", "7m":"7m", "8m":"8m", "9n":"9n",
      "10m":"10m", "11m":"11m", "12nm":"12nm", "13m":"13m", "14n":"14n", "15m":"15m", "16m":"16m", "17n":"17n", "18nm":"18nm", "19m1":"19m1", "19m2":"19m2",
      "19m3":"19m3", "19m4":"19m4", "20n":"20n", "21nm":"21nm", "22nm":"22nm", "23m":"23m", "24n":"24n", "25m":"25m", "26n":"26n", "27nm":"27nm", "28m":"28m",
      "29n":"29n", "30m":"30m", "31n":"31n"},
      "onload": "window.lastWarning=(-10);",
      "onupdate": "if (routes['0m'].nearest) { daoplayer.setScene('Scene_0'); } else if (routes['1n'].nearest) { daoplayer.setScene('Scene_1'); } else if (routes['2m'].nearest) { daoplayer.setScene('Scene_2'); } else if (routes['3n'].nearest) { daoplayer.setScene('Scene_3'); } else if (routes['4m'].nearest) { daoplayer.setScene('Scene_4'); } else if (routes['5n'].nearest) { daoplayer.setScene('Scene_5'); } else if (routes['6nm'].nearest) { daoplayer.setScene('Scene_6'); } else if (routes['7m'].nearest) { daoplayer.setScene('Scene_7'); } else if (routes['8m'].nearest) { daoplayer.setScene('Scene_8'); } else if (routes['9n'].nearest) { daoplayer.setScene('Scene_9'); } else if (routes['10m'].nearest) { daoplayer.setScene('Scene_10'); } else if (routes['11m'].nearest) { daoplayer.setScene('Scene_11'); } else if (routes['12nm'].nearest) { daoplayer.setScene('Scene_12'); } else if (routes['13m'].nearest) { daoplayer.setScene('Scene_13'); } else if (routes['14n'].nearest) { daoplayer.setScene('Scene_14'); } else if (routes['15m'].nearest) { daoplayer.setScene('Scene_15'); } else if (routes['16m'].nearest) { daoplayer.setScene('Scene_16'); } else if (routes['17n'].nearest) { daoplayer.setScene('Scene_17'); } else if (routes['18nm'].nearest) { daoplayer.setScene('Scene_18'); } else if (routes['19m1'].nearest || routes['19m2'].nearest || routes['19m3'].nearest || routes['19m4'].nearest) { daoplayer.setScene('Scene_19'); } else if (routes['20n'].nearest) { daoplayer.setScene('Scene_20'); } else if (routes['21nm'].nearest) { daoplayer.setScene('Scene_21'); } else if (routes['22nm'].nearest) { daoplayer.setScene('Scene_22'); } else if (routes['23m'].nearest) { daoplayer.setScene('Scene_23'); } else if (routes['24n'].nearest) { daoplayer.setScene('Scene_24'); } else if (routes['25m'].nearest) { daoplayer.setScene('Scene_25'); } else if (routes['26n'].nearest) { daoplayer.setScene('Scene_26'); } else if (routes['27nm'].nearest) { daoplayer.setScene('Scene_27'); } else if (routes['28m'].nearest) { daoplayer.setScene('Scene_28'); } else if (routes['29n'].nearest) { daoplayer.setScene('Scene_29'); } else if (routes['30m'].nearest) { daoplayer.setScene('Scene_30'); } else if (routes['31n'].nearest) { daoplayer.setScene('Scene_31'); } else if (activity=='NOGPS') { daoplayer.setScene('getGPS'); } else if (totalTime-window.lastWarning>20) { window.lastWarning=totalTime; daoplayer.speak('Music will continue when GPS reports you are near the route', false); }",
      "updatePeriod":1.0,
      "description": "where are we??"
    }
  ]
}
